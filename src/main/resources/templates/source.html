<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout :: head('Administrator')}">
</head>
<body th:replace="~{layout :: base(~{::section})}">
    <section>
        <p th:text="${sources}">debug sources</p>
        <div>
            <h2>뉴스 발행처</h2>
            <!-- bootstrap을 이용한 버튼 만들기-->
            <!-- /inputSources 연결하기 -->
            <a class="btn btn-primary" th:href="@{/admin/inputSources}" th:text="'발행처 갱신'">발행처 갱신</a>
        </div>

        <div class="alert alert-danger" th:if="${error}">
            <p th:text="${error}"></p>
        </div>

        <table class="table table-striped table-hover">
            <thead class="table-dark">
            <tr>
                <th class="text-center align-middle" scope="col">발행처</th>
                <th class="text-center align-middle" scope="col">설명</th>
                <th class="text-center align-middle" scope="col">카테고리</th>
                <th class="text-center align-middle" scope="col">국가</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="src : ${sources}">
                <td >
                    <a th:href="${src.url}" th:text="${src.name}"></a>
                </td>
                <td th:text="${src.description}"></td>
                <td class="text-center" th:text="${src.category}"></td>
                <td class="text-center" th:text="${src.country}"></td>
                <!-- url link to name-->
            </tr>
            </tbody>
        </table>

        <!-- 페이지 제어기 (페이지네이션) -->
        <nav>
            <ul class="pagination justify-content-center my-3">
                <!-- 처음 -->
                <li class="page-item" th:classappend="${sources.first} ? 'disabled'">
                    <a class="page-link" th:href="@{/admin/source(page=0, size=${sources.size})}">처음</a>
                </li>
                <!-- 이전 -->
                <li class="page-item" th:classappend="${sources.first} ? 'disabled'">
                    <a class="page-link" th:href="@{/admin/source(page=${sources.number-1}, size=${sources.size})}">이전</a>
                </li>
                <!-- 페이지 번호(최대 10개) -->
                <li class="page-item"
                    th:each="i : ${#numbers.sequence((sources.number / 10) * 10,
                             T(java.lang.Math).min((sources.number / 10) * 10 + 9, sources.totalPages - 1))}"
                    th:classappend="${sources.number == i} ? active">
                    <a class="page-link"
                       th:href="@{/admin/source(page=${i}, size=${sources.size})}"
                        th:text="${i+1}">0</a>
                </li>
                <!-- 다음 -->
                <li class="page-item" th:classappend="${sources.last} ? 'disabled'">
                    <a class="page-link" th:href="@{/admin/source(page=${sources.number+1}, size=${sources.size})}">다음</a>
                </li>
                <!-- 마지막 -->
                <li class="page-item" th:classappend="${sources.last} ? 'disabled'">
                    <a class="page-link" th:href="@{/admin/source(page=${sources.totalPages - 1}, size=${sources.size})}">마지막</a>
                </li>
            </ul>
        </nav>

    </section>

    <div th:replace="~{layout :: bootstrap_script}"></div>
</body>
</html>